{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/home/arham/Desktop/ecommerce-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{Form,Button,Row,Col}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import Loader from'../components/Loader';import Message from'../components/Message';import{getUserDetails,updateUserProfile}from'../actions/userActions';var ProfileScreen=function ProfileScreen(_ref){var location=_ref.location,history=_ref.history;var dispatch=useDispatch();var userDetails=useSelector(function(state){return state.userDetails;});var loading=userDetails.loading,error=userDetails.error,user=userDetails.user;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var userUpdateProfile=useSelector(function(state){return state.userUpdateProfile;});var success=userUpdateProfile.success;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),name=_useState4[0],setName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),confirmPassword=_useState8[0],setConfirmPassword=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),message=_useState10[0],setMessage=_useState10[1];useEffect(function(){if(!userInfo){history.push('/login');}else{if(!user.name){dispatch(getUserDetails('profile'));}else{setName(user.name);setEmail(user.email);}}},[history,dispatch,user]);var submitHandler=function submitHandler(e){e.preventDefault();if(password!==confirmPassword){setMessage('Password do not match');}else{dispatch(updateUserProfile({id:user._id,name:name,email:email,password:password}));}};return/*#__PURE__*/_jsxs(Row,{className:\"py-3\",children:[/*#__PURE__*/_jsxs(Col,{md:3,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"User Profile \"}),message&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:message}),error&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}),success&&/*#__PURE__*/_jsx(Message,{variant:\"success\",children:\"Profile Updated\"}),loading&&/*#__PURE__*/_jsx(Loader,{}),/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"name\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"name\",placeholder:\"Enter Name\",value:name,onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"email\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email Address\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",placeholder:\"Enter Email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"password\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Enter Password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"confirmPassword\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Confirm Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Enter Confirm Password\",value:confirmPassword,onChange:function onChange(e){return setConfirmPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"primary\",children:\"Update\"})]})]}),/*#__PURE__*/_jsx(Col,{md:9,children:/*#__PURE__*/_jsx(\"h2\",{children:\"My Orders\"})})]});};export default ProfileScreen;","map":{"version":3,"sources":["/home/arham/Desktop/ecommerce-app/frontend/src/screens/ProfileScreen.js"],"names":["React","useState","useEffect","Link","Form","Button","Row","Col","useDispatch","useSelector","Loader","Message","getUserDetails","updateUserProfile","ProfileScreen","location","history","dispatch","userDetails","state","loading","error","user","userLogin","userInfo","userUpdateProfile","success","email","setEmail","name","setName","password","setPassword","confirmPassword","setConfirmPassword","message","setMessage","push","submitHandler","e","preventDefault","id","_id","target","value"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react'\nimport {Link} from 'react-router-dom'\nimport {Form,Button,Row,Col} from 'react-bootstrap'\nimport {useDispatch, useSelector} from 'react-redux'\nimport Loader from '../components/Loader'\nimport Message from '../components/Message'\nimport {getUserDetails,updateUserProfile} from '../actions/userActions'\n\nconst ProfileScreen = ({location,history}) => {\n    const dispatch=useDispatch()\n    const userDetails=useSelector(state=>state.userDetails)\n    const {loading,error,user} = userDetails\n    const userLogin=useSelector(state=>state.userLogin)\n    const {userInfo} = userLogin\n    const userUpdateProfile=useSelector(state=>state.userUpdateProfile)\n    const {success} = userUpdateProfile\n    const [email,setEmail]=useState('')\n    const [name,setName]=useState('')\n    const [password,setPassword]=useState('')\n    const [confirmPassword,setConfirmPassword]=useState('')\n    const [message,setMessage]=useState(null)\n    useEffect(()=>{\n        if(!userInfo){\n            history.push('/login')\n        }\n        else{\n            if(!user.name){\n                dispatch(getUserDetails('profile'))\n            }\n            else{\n                setName(user.name)\n                setEmail(user.email)\n            }\n        }\n    },[history,dispatch,user])\n    const submitHandler=(e)=>{\n        e.preventDefault()\n        if(password!==confirmPassword){\n            setMessage('Password do not match')\n        }\n        else{\n             dispatch(updateUserProfile({id:user._id,name,email,password}))\n        }\n    \n    }\n    return (\n            \n            <Row className='py-3'>\n                <Col md={3}>\n                <h1>User Profile </h1>\n            {message && <Message variant='danger'>{message}</Message>}\n            {error && <Message variant='danger'>{error}</Message>}\n            {success && <Message variant='success'>Profile Updated</Message>}\n            {loading && <Loader/>}\n            <Form onSubmit={submitHandler}>\n                <Form.Group controlId='name'>\n                    <Form.Label>Name</Form.Label>\n                    <Form.Control type='name' placeholder='Enter Name' value={name} onChange={e=>setName(e.target.value)}></Form.Control></Form.Group>\n                <Form.Group controlId='email'>\n                    <Form.Label>Email Address</Form.Label>\n                    <Form.Control type='email' placeholder='Enter Email' value={email} onChange={e=>setEmail(e.target.value)}></Form.Control></Form.Group>\n                <Form.Group controlId='password'>\n                    <Form.Label>Password</Form.Label>\n                    <Form.Control type='password' placeholder='Enter Password' value={password} onChange={e=>setPassword(e.target.value)}></Form.Control>\n                </Form.Group>\n                <Form.Group controlId='confirmPassword'>\n                    <Form.Label>Confirm Password</Form.Label>\n                    <Form.Control type='password' placeholder='Enter Confirm Password' value={confirmPassword} onChange={e=>setConfirmPassword(e.target.value)}></Form.Control>\n                </Form.Group>\n                <Button type='submit' variant='primary'>\n                    Update\n                </Button>\n            </Form>\n                </Col>\n                <Col md={9}>\n                    <h2>My Orders</h2>\n                </Col>\n            </Row>\n    )\n}\n\nexport default ProfileScreen\n"]},"metadata":{},"sourceType":"module"}